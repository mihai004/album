{% extends 'base.html.twig' %}

{% block body %}

    <div class="wrapper">
        <div class="row" style="background-color: #ffffff">
            <h1>Album title: {{ album.title }}</h1>
            <div class="col-sm-6">
                <div style="text-align: center">
                    <img style="border-radius: 30px" src="{{ asset('public/uploads_directory/' ~ album.image ) }}">
                    <p><b>Artist:</b> {{ album.artist }} </p>
                    <p><b>ISRC:</b> {{ album.isrc }} </p>
                    <h3><b>Summary:</b></h3>
                    <p></p>
                </div>
            </div>
            <div class="col-sm-6" style="text-align: center">
                <ol>
                    {% for track in album.albumTracks %}
                        <li>{{ track.trackName }}</li>
                    {% endfor %}
                </ol>
            </div>
        </div>

        <div class="row">
            {% for review in reviews %}
                <div class="col-sm-12" id="reviewsBackground">
                    <article>
                        <div class="col-sm-12 col-lg-12">
                            <div class="col-lg-12">
                                <div class="col-sm-6 col-lg-9">
                                    <div class="col-sm-3 col-lg-5">
                                        <p><b>{{ review.title }}</b></p>
                                    </div>
                                    <div class="col-sm-3 col-lg-4">
                                        <h4> Created at {{ review.timestamp | date('H:i d/m/y') }} </h4>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-lg-3">
                                    {{ review.rating|rating(5, 'fa-star') }}
                                </div>
                            </div>
                            <div class="col-sm-12 colg-lg-12" style="text-indent: 2em; text-align: justify">
                                {{ review.review }}
                            </div>
                        </div>
                        <div class="col-sm-12 col-lg-12">


                            {% if (is_granted('ROLE_USER') and review.reviewer == app.user)
                                or is_granted('ROLE_ADMIN') %}
                                <div class="col-sm-3 col-lg-2 col-lg-offset-6">
                                    <a href="{{ path('edit_review', {id: review.id}) }}">
                                        <button type="button" id="register_button">
                                            Edit review
                                        </button>
                                    </a>
                                </div>
                            {% endif %}
                                {% if is_granted('ROLE_ADMIN') or review.reviewer == app.user %}
                                    <div class="col-sm-3 col-lg-2">
                                        <a href="{{ path('delete_review', {id: review.id}) }}">
                                            <button class="btn btn-danger" id="_reusable_danger">
                                                Delete review
                                            </button>
                                        </a>
                                    </div>
                                {% endif %}
                            <div class="col-sm-3 col-lg-2">
                                <a href="{{ path('view_review', {id: review.id}) }}">
                                    <button class="btn btn-danger" id="register_button">
                                        View review
                                    </button>
                                </a>
                            </div>
                        </div>
                    </article>
                </div>
            {% endfor %}
        </div>

        <div class="col-sm-12 col-lg-12" style="text-align: center">
            <a href="{{ path('add_review', {id: album.id}) }}">
                <button type="button" id="register_button">
                    Add Review
                </button>
            </a>
        </div>
    </div>

{% endblock %}

